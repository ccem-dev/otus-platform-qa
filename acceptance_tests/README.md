# Acceptance tests on Otus

### Files organization

 * ```./code``` : class and library code support for testing
 
   * ```classes/``` : page element generic classes
   
   * ```handlers/``` : "static" classes for specific things needed in all tests
   
   * ```otus/``` : classes and library for otus tests
     * ```classes/```
     * ```lib.js```
     
   * ```otus-studio/``` : classes and library for otus-studio tests
     * ```classes/```
     * ```lib.js```
     
   * ```mainConstants.js``` : all the configuration constants (browser, timeout, paths) for all tests
   
   * ```utils.js``` : library with functions called in test files
   
 * ```data/``` : login data file, input files for tests (see [pattern for otus studio data files](./data/otus-studio/README.md))
 
 * ```downloads/``` : download directory, created by makefile
 
 * ```output/``` : directory, created by makefile, for output like screenshots and test results
 
 * ```tests/``` : directory with the test files, organized by the platform directory (which contains a template.js file as an example)
 
 * ```.env.staging```: custom env file, with constants that can be setted by parameter (like show browser, otus login data)
 
 * ```init_script.js``` to get and write the login data file, at same directory
 
 * ```jest.config.js``` : "main file" - config file, including test files path array (```testMatch``` attribute)
 


### Environment

At first use, just run ``` make init``` .

To reinstall (deleting all files generated by 'npm install'), run ``` make reinstall```.

If you need reset your login data, run ``` make set_login_data.

### Run

For run all tests (defined in jest.config): 

 * ```npm run headless``` to use defult headless option
 * ```npm run show``` to run as headfull (show browser)
 
 You can run in custom mode by passing any parameters defined in the file ```.env.staging```.

### Results

At the end of the run, files will be generated in ```output/test_result```, one for each test file and with the same name:

 * ```<test file name>-result.txt``` if all test passed
 * ```<test file name>-fails.txt``` if same test fail
